<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BitStudio | Soluciones Tecnológicas</title>
    <!-- Agregado: Icono de la página (Favicon) -->
    <link rel="icon" type="image/x-icon" href="icon.ico">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fuente Outfit -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <!-- Iconos Lucide -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- Configuración Base y Tipografía --- */
        body {
            font-family: 'Outfit', sans-serif;
            background-color: #0f172a; /* Slate 900 */
            color: #e2e8f0;
            overflow-x: hidden;
            position: relative;
        }

        /* --- Scrollbar Personalizado --- */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(15, 23, 42, 0.1);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            border: 2px solid transparent;
            background-clip: content-box;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.4);
        }
        * {
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.2) rgba(15, 23, 42, 0.1);
        }

        /* --- Estilos Personalizados para el Slider de Volumen (Mejorado para Móvil) --- */
        /* Webkit (Chrome, Safari, Edge) */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px; /* Aumentado para mejor tacto */
            width: 20px;
            border-radius: 50%;
            background: #22d3ee; /* cyan-400 */
            cursor: pointer;
            margin-top: -8px; /* Centrar verticalmente */
            box-shadow: 0 0 10px rgba(34, 211, 238, 0.5);
            border: 2px solid #0f172a;
            transition: transform 0.1s ease;
        }
        input[type=range]:active::-webkit-slider-thumb {
            transform: scale(1.2); /* Efecto al presionar */
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
        }
        /* Firefox */
        input[type=range]::-moz-range-thumb {
            height: 20px;
            width: 20px;
            border: none;
            border-radius: 50%;
            background: #22d3ee;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(34, 211, 238, 0.5);
            border: 2px solid #0f172a;
        }
        input[type=range]::-moz-range-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
        }

        /* --- Animación de Icono de Volumen (Pop Effect & Smooth Rays) --- */
        @keyframes iconPop {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        .icon-pop {
            animation: iconPop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        /* Transición suave para las partes del SVG */
        .vol-part {
            transition: opacity 0.3s ease;
        }

        /* Ajuste para el scroll */
        html {
            scroll-padding-top: 100px;
        }

        /* --- Fondo Animado (Orbes de Luz) --- */
        .background-orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(100px);
            z-index: -1;
            animation: float 25s infinite ease-in-out;
            opacity: 0.5;
            pointer-events: none;
        }

        .orb-primary {
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, #4f46e5 0%, transparent 70%);
            top: -150px;
            left: -150px;
        }

        .orb-secondary {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, #c026d3 0%, transparent 70%);
            bottom: -100px;
            right: -100px;
            animation-delay: -5s;
        }

        .orb-accent {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, #06b6d4 0%, transparent 70%);
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation-delay: -10s;
            opacity: 0.3;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
        }

        /* --- Glassmorphism --- */
        .glass-panel {
            background: rgba(15, 23, 42, 0.75);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .glass-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 40px -5px rgba(0, 0, 0, 0.4);
        }

        /* --- Utilidades de Texto --- */
        .text-gradient {
            background: linear-gradient(to right, #22d3ee, #e879f9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* --- Acordeón (Dropdown) --- */
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, opacity 0.5s ease, margin-top 0.3s ease;
            opacity: 0;
        }
        
        .accordion-content.active {
            max-height: 2000px;
            opacity: 1;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chevron {
            transition: transform 0.3s ease;
        }
        /* --- Logo Animado --- */
        .logo-container:hover .logo-icon {
            color: #22d3ee;
            filter: drop-shadow(0 0 8px rgba(34, 211, 238, 0.5));
        }

        /* Estilo para listas dentro de detalles */
        .details-list li {
            position: relative;
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .details-list li::before {
            content: '•';
            color: #22d3ee;
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        /* Estilo para el Overlay de Pagos */
        #pagos-overlay {
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        #pagos-overlay.hidden-overlay {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }
        #pagos-overlay.visible-overlay {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }

        /* --- Estilo para el Overlay de DEMO (NUEVO/ACTUALIZADO) --- */
        #demo-overlay {
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        #demo-overlay.hidden-demo {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }
        #demo-overlay.visible-demo {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }

        /* --- Animación Carrusel Vinilos (HORIZONTAL) --- */
        .vinyl-track-h {
            animation: scrollLeft 20s linear infinite;
            display: flex;
            width: max-content; 
        }

        @keyframes scrollLeft {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .fade-mask-h {
            mask-image: linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%);
            -webkit-mask-image: linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%);
        }

        .vinyl-record {
            width: 120px;
            height: 120px;
            border-radius: 4px;
            background: #1e1e1e;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            flex-shrink: 0; 
        }
        .vinyl-disc {
            width: 90%;
            height: 90%;
            border-radius: 50%;
            background: radial-gradient(circle, #111 20%, #333 21%, #111 22%, #333 30%, #111 31%, #000 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .vinyl-disc::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 50%;
            background: conic-gradient(transparent 0deg, rgba(255,255,255,0.1) 45deg, transparent 90deg, rgba(255,255,255,0.1) 225deg, transparent 270deg);
        }
        .vinyl-label {
            width: 35%;
            height: 35%;
            border-radius: 50%;
            z-index: 2;
        }

    </style>
</head>
<body>

    <!-- AGREGADO: Elemento de Audio para Música de Fondo -->
    <audio id="bg-music" loop>
        <source src="loop.mp3" type="audio/mpeg">
        <!-- Fallback si el navegador no soporta el audio -->
        Tu navegador no soporta el elemento de audio.
    </audio>

    <!-- AGREGADO: Contenedor Principal de Música (Toggle + Menú) -->
    <div id="music-container" class="fixed top-24 left-1/2 -translate-x-1/2 z-40 flex flex-col items-center gap-2 transition-all duration-500">
        
        <!-- Botón Disparador ("Bolita") -->
        <button id="music-trigger" class="glass-panel px-4 py-1.5 rounded-full flex items-center gap-2 border border-white/10 shadow-lg backdrop-blur-xl bg-[#0f172a]/60 text-xs font-bold text-gray-300 hover:text-white transition-all hover:scale-105 z-50 group">
            <span>Música</span>
            <i class="fa-solid fa-chevron-down transition-transform duration-300 group-hover:text-cyan-400 text-[10px]"></i>
        </button>

        <!-- Panel de Control -->
        <div id="music-panel" class="hidden glass-panel pl-4 pr-5 py-2 rounded-full flex items-center gap-3 border border-white/10 shadow-[0_0_20px_rgba(34,211,238,0.15)] backdrop-blur-xl bg-[#0f172a]/80 transition-all duration-500 ease-in-out -translate-y-8 opacity-0 z-40">
            <button id="music-toggle" class="text-cyan-400 hover:text-white transition-transform hover:scale-110 w-6 flex justify-center shrink-0">
                <i class="fa-solid fa-play text-lg"></i>
            </button>
            <div class="w-px h-4 bg-white/20 shrink-0"></div>
            
            <!-- BOTÓN MUTE (Aumentado de tamaño y ajustado para no cortar) -->
            <button id="mute-toggle" class="text-gray-400 hover:text-white transition-transform hover:scale-110 w-8 h-8 flex justify-center items-center shrink-0">
                <!-- SVG ajustado con viewBox y escala interna -->
                <svg class="w-7 h-7" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <!-- Grupo escalado para evitar recortes en los bordes -->
                    <g transform="scale(0.85) translate(2, 2)">
                        <!-- Bocina -->
                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                        <!-- X de Mute (ID: vol-mute-x) -->
                        <g id="vol-mute-x" class="vol-part opacity-0">
                            <line x1="23" y1="9" x2="17" y2="15"></line>
                            <line x1="17" y1="9" x2="23" y2="15"></line>
                        </g>
                        <!-- Rayita 1 (ID: vol-wave-1) -->
                        <path id="vol-wave-1" class="vol-part opacity-0" d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                        <!-- Rayita 2 (ID: vol-wave-2) -->
                        <path id="vol-wave-2" class="vol-part opacity-0" d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
                        <!-- Rayita 3 (ID: vol-wave-3) -->
                        <path id="vol-wave-3" class="vol-part opacity-0" d="M22 2a15 15 0 0 1 0 20"></path>
                    </g>
                </svg>
            </button>
            
            <!-- Separador y Botón Expansor -->
            <div class="w-px h-4 bg-white/20 shrink-0"></div>
            <button id="volume-expand" class="text-gray-400 hover:text-cyan-400 transition-all duration-300 w-4 flex justify-center shrink-0">
                <i class="fa-solid fa-chevron-right text-xs"></i>
            </button>

            <!-- Barra de Volumen Desplegable (Mejorada) -->
            <div id="volume-wrapper" class="w-0 overflow-hidden transition-all duration-300 ease-out flex items-center">
                <div class="w-36 px-2 flex items-center gap-3">
                    <!-- input range con altura mejorada -->
                    <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.4" class="w-full h-6 bg-transparent appearance-none cursor-pointer focus:outline-none">
                    <!-- Indicador de porcentaje -->
                    <span id="volume-text" class="text-[10px] font-mono text-cyan-400 w-8 text-right shrink-0">40%</span>
                </div>
            </div>
        </div>
    </div>

    <!-- NUEVO: Mini Header / Logo Flotante -->
    <div id="mini-header" class="fixed top-4 left-4 z-50 transition-all duration-500 -translate-y-32 opacity-0">
        <div class="glass-panel p-2.5 rounded-xl border border-cyan-500/20 bg-[#0f172a]/90 shadow-lg cursor-pointer flex items-center gap-2 hover:border-cyan-400/50 transition-colors" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
            <i data-lucide="cpu" class="text-cyan-400 w-6 h-6"></i>
            <span class="font-bold text-white text-sm hidden sm:block">BitStudio</span>
        </div>
    </div>

    <!-- Fondos Animados -->
    <div class="background-orb orb-primary"></div>
    <div class="background-orb orb-secondary"></div>
    <div class="background-orb orb-accent"></div>

    <!-- Navegación -->
    <nav id="main-nav" class="fixed w-full z-50 glass-panel border-t-0 border-x-0 top-0 transition-transform duration-500">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex items-center gap-3 logo-container group cursor-pointer" onclick="window.location.href='#inicio'">
                    <div class="relative p-2.5 rounded-xl bg-gradient-to-br from-cyan-500/10 to-blue-500/10 border border-cyan-500/20 group-hover:border-cyan-400/50 transition-colors">
                        <i data-lucide="cpu" class="text-cyan-400 w-6 h-6 logo-icon transition-all duration-300"></i>
                        <div class="absolute -top-1 -right-1 w-2.5 h-2.5 bg-green-500 rounded-full border-2 border-[#0f172a]"></div>
                    </div>
                    <div class="flex flex-col">
                        <span class="font-bold text-xl tracking-tight text-white leading-none">Bit<span class="text-cyan-400">Studio</span></span>
                        <span class="text-[10px] text-gray-400 tracking-widest uppercase mt-0.5">Tech Solutions</span>
                    </div>
                </div>
                
                <div class="hidden md:block">
                    <div class="ml-10 flex items-center space-x-8">
                        <a href="#inicio" class="text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors">Inicio</a>
                        <a href="#servicios" class="text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors">Servicios</a>
                        <a href="#portafolio" class="text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors">Portafolio</a>
                        <button onclick="togglePagos()" class="text-sm font-medium text-blue-300 hover:text-blue-400 transition-colors flex items-center gap-2">
                            <i class="fa-brands fa-paypal"></i> Pagos
                        </button>
                        <a href="https://wa.me/message/GTDQYEMHLALMH1?src=qr" target="_blank" class="px-5 py-2.5 rounded-xl bg-cyan-500/10 text-cyan-400 border border-cyan-500/20 hover:bg-cyan-500/20 hover:border-cyan-400/50 hover:shadow-[0_0_15px_rgba(34,211,238,0.15)] transition-all text-sm font-bold">
                            Contáctame
                        </a>
                    </div>
                </div>

                <div class="md:hidden">
                    <button onclick="document.getElementById('mobile-menu').classList.toggle('hidden')" class="text-gray-300 hover:text-white p-2">
                        <i data-lucide="menu" class="w-7 h-7"></i>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden glass-panel border-t border-white/10">
            <div class="px-4 py-4 space-y-2">
                <a href="#inicio" class="block px-3 py-2 rounded-md hover:bg-white/5 text-gray-200">Inicio</a>
                <a href="#servicios" class="block px-3 py-2 rounded-md hover:bg-white/5 text-gray-200">Servicios</a>
                <a href="#portafolio" class="block px-3 py-2 rounded-md hover:bg-white/5 text-gray-200">Portafolio</a>
                <button onclick="togglePagos(); document.getElementById('mobile-menu').classList.add('hidden')" class="w-full text-left block px-3 py-2 rounded-md hover:bg-white/5 text-blue-300">
                    <i class="fa-brands fa-paypal mr-2"></i> Pagos
                </button>
                <a href="#contacto" class="block px-3 py-2 rounded-md text-cyan-400 font-bold hover:bg-white/5">Contacto</a>
            </div>
        </div>
    </nav>

    <!-- Overlay de Pagos -->
    <div id="pagos-overlay" class="hidden-overlay fixed inset-0 z-[60] bg-[#0f172a]/95 backdrop-blur-xl flex items-center justify-center p-4">
        <div class="glass-panel p-6 md:p-8 rounded-3xl max-w-md w-full relative border border-blue-500/30 shadow-[0_0_50px_rgba(59,130,246,0.15)] max-h-[85vh] overflow-y-auto">
            <button onclick="togglePagos()" class="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <div class="text-center">
                <div class="w-20 h-20 bg-blue-600/20 rounded-full flex items-center justify-center mx-auto mb-6 text-blue-400 border border-blue-500/30 shrink-0">
                    <i class="fa-brands fa-paypal text-4xl"></i>
                </div>
                <h2 class="text-3xl font-bold text-white mb-2">Métodos de Pago</h2>
                <p class="text-gray-400 mb-6 text-sm">Realiza tu pago de forma segura a través de PayPal.</p>
                <div class="space-y-4">
                    <div class="bg-white/5 rounded-xl p-4 border border-white/10">
                        <p class="text-xs text-blue-300 font-bold uppercase mb-2 tracking-wider">Pago Rápido</p>
                        <p class="text-sm text-gray-300 mb-3">Haz clic en el botón para pagar directamente con tu cuenta:</p>
                        <a href="https://paypal.me/BitStudio1240" target="_blank" class="block w-full py-3 bg-[#0070BA] hover:bg-[#005ea6] text-white font-bold rounded-lg transition-colors shadow-lg">
                            Pagar con PayPal.Me
                        </a>
                    </div> 
                    <div class="relative flex py-2 items-center">
                        <div class="flex-grow border-t border-white/10"></div>
                        <span class="flex-shrink-0 mx-4 text-gray-500 text-xs">O USA EL CORREO</span>
                        <div class="flex-grow border-t border-white/10"></div>
                    </div>
                    <div class="bg-blue-600/10 rounded-xl border border-blue-500/30 relative overflow-hidden transition-all duration-300">
                        <button onclick="toggleEmailPagos()" class="w-full p-4 flex items-center justify-between text-left hover:bg-white/5 transition-colors">
                            <div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-blue-300 font-bold uppercase tracking-wider">Opción Recomendada</span>
                                    <span class="bg-blue-600 text-white text-[9px] px-1.5 py-0.5 font-bold rounded">INFO</span>
                                </div>
                                <p class="text-sm font-bold text-white mt-1">Ver datos para Transferencia/Correo</p>
                            </div>
                            <i id="chevron-email" data-lucide="chevron-down" class="w-5 h-5 text-blue-300 chevron transition-transform duration-300"></i>
                        </button>
                        <div id="email-pagos-content" class="accordion-content px-4 pb-4">
                            <div class="pt-2 border-t border-white/10">
                                <p class="text-xs text-blue-300 font-bold uppercase mb-2 tracking-wider mt-2">Instrucciones:</p>
                                <ol class="text-xs text-gray-300 space-y-1 list-decimal ml-4 mb-4 text-left">
                                    <li>Entra a tu app de PayPal.</li>
                                    <li>Selecciona "Enviar" o "Pagar".</li>
                                    <li>Ingresa el siguiente correo:</li>
                                </ol>
                                <div class="bg-black/30 p-3 rounded-lg border border-white/10 flex items-center justify-between group cursor-pointer mb-4" onclick="copiarCorreo()">
                                    <p class="text-white font-mono text-xs sm:text-sm break-all" id="paypal-email">jesusantoniobarretocastillo02@gmail.com</p>
                                    <i data-lucide="copy" class="w-5 h-5 text-blue-400 group-hover:text-white transition-colors shrink-0 ml-2"></i>
                                </div>
                                <button onclick="copiarCorreo()" class="w-full py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-lg transition-colors shadow-lg flex items-center justify-center gap-2 text-sm">
                                    <i class="fa-regular fa-copy"></i> Copiar Correo
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="mt-8 text-xs text-gray-500 italic">
                    * Una vez realizado el pago, por favor envía una captura de pantalla por WhatsApp para confirmar tu pedido.
                </p>
                <button onclick="togglePagos()" class="mt-6 text-gray-400 hover:text-white text-sm underline underline-offset-4">
                    Volver a la página principal
                </button>
            </div>
        </div>
    </div>

    <!-- NUEVO: Overlay de Demo con Menú de Selección (INTEGRADO) -->
    <div id="demo-overlay" class="hidden-demo fixed inset-0 z-[70] bg-black/95 backdrop-blur-xl flex items-center justify-center p-0 md:p-8">
        <!-- Contenido Demo... (Igual que antes) -->
        <div class="w-full h-full max-w-sm md:max-w-[400px] md:h-[800px] bg-[#0f172a] relative shadow-2xl md:rounded-[3rem] overflow-hidden border-8 border-gray-900 flex flex-col">
            <div class="absolute top-0 left-1/2 -translate-x-1/2 w-32 h-7 bg-gray-900 rounded-b-2xl z-20 hidden md:block"></div>
            <button onclick="closeDemo()" class="absolute top-4 right-4 md:top-10 md:right-6 w-8 h-8 bg-black/50 text-white rounded-full flex items-center justify-center hover:bg-red-500 transition z-50">
                <i class="fa-solid fa-xmark"></i>
            </button>
            <button id="back-to-menu" onclick="backToMenu()" class="absolute top-4 left-4 md:top-10 md:left-6 w-8 h-8 bg-black/50 text-white rounded-full flex items-center justify-center hover:bg-cyan-500 transition z-50 hidden">
                <i class="fa-solid fa-arrow-left"></i>
            </button>
            <div id="demo-menu" class="w-full h-full flex flex-col items-center justify-center p-6 space-y-8 absolute inset-0 z-30 bg-[#0f172a]">
                <div class="text-center">
                    <div class="w-16 h-16 bg-cyan-500/10 rounded-2xl flex items-center justify-center mx-auto mb-4 border border-cyan-500/30">
                        <i class="fa-solid fa-mobile-screen text-2xl text-cyan-400"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-white mb-2">Selecciona un Estilo</h3>
                    <p class="text-sm text-gray-400">Explora nuestras plantillas interactivas</p>
                </div>
                <div class="space-y-4 w-full">
                    <button onclick="loadDemo('invitacion.html')" class="w-full p-4 rounded-xl bg-white/5 border border-white/10 hover:border-amber-500/50 hover:bg-white/10 transition-all group text-left flex items-center gap-4">
                        <div class="w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 group-hover:scale-110 transition-transform">
                            <i class="fa-solid fa-leaf"></i>
                        </div>
                        <div>
                            <h4 class="text-white font-bold">Estilo Floral</h4>
                            <p class="text-xs text-gray-400">Clásico, elegante y cálido.</p>
                        </div>
                        <i class="fa-solid fa-chevron-right ml-auto text-gray-600 group-hover:text-white"></i>
                    </button>
                    <button onclick="loadDemo('invitacion2.html')" class="w-full p-4 rounded-xl bg-white/5 border border-white/10 hover:border-fuchsia-500/50 hover:bg-white/10 transition-all group text-left flex items-center gap-4">
                        <div class="w-12 h-12 rounded-full bg-fuchsia-900/50 flex items-center justify-center text-fuchsia-400 group-hover:scale-110 transition-transform">
                            <i class="fa-solid fa-bolt"></i>
                        </div>
                        <div>
                            <h4 class="text-white font-bold">Estilo Moderno</h4>
                            <p class="text-xs text-gray-400">Neon, Dark Mode y animaciones.</p>
                        </div>
                        <i class="fa-solid fa-chevron-right ml-auto text-gray-600 group-hover:text-white"></i>
                    </button>
                </div>
            </div>
            <div id="demo-container" class="w-full h-full relative z-10 hidden">
                <iframe id="demo-frame" class="w-full h-full" frameborder="0"></iframe>
            </div>
        </div>
    </div>

    <!-- Sección Hero (Inicio) -->
    <section id="inicio" class="relative pt-40 pb-20 px-4 text-center">
        <!-- ... Contenido Hero ... -->
        <div class="max-w-4xl mx-auto space-y-8">
            <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full glass-card border-cyan-500/30 text-cyan-300 text-sm font-semibold mx-auto backdrop-blur-md">
                <span class="relative flex h-2 w-2">
                  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-cyan-400 opacity-75"></span>
                  <span class="relative inline-flex rounded-full h-2 w-2 bg-cyan-500"></span>
                </span>
                BitStudio
            </div>
            <h1 class="text-5xl md:text-7xl font-bold leading-tight tracking-tight text-white">
                Bienvenido a <br> <span class="text-gradient">BitStudio</span>
            </h1>
            <p class="text-xl text-gray-300 max-w-2xl mx-auto leading-relaxed">
                Tu centro de soluciones digitales. Desde la recuperación de música en alta calidad hasta soporte técnico especializado con Linux.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center pt-6">
                <a href="#servicios" class="px-8 py-4 rounded-xl bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold shadow-lg shadow-cyan-500/25 transition-all transform hover:-translate-y-1">
                    Explorar Servicios
                </a>
            </div>
        </div>
    </section>

    <!-- Sección de Servicios -->
    <section id="servicios" class="py-20 px-4">
        <!-- ... Contenido Servicios (Se mantiene igual) ... -->
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-5xl font-bold mb-4 text-white">Catálogo BitStudio</h2>
                <div class="w-24 h-1 bg-gradient-to-r from-cyan-500 to-fuchsia-500 mx-auto rounded-full"></div>
            </div>
            <h3 class="text-2xl font-bold text-white mb-8 mt-12 ml-2 flex items-center gap-3">
                <i data-lucide="sparkles" class="text-cyan-400 w-6 h-6"></i> Servicios Digitales
            </h3>
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Musica -->
                <div class="glass-card p-8 rounded-3xl border-l-4 border-cyan-500 group">
                    <div class="flex justify-between items-start mb-6">
                        <div class="bg-cyan-500/10 border border-cyan-500/20 p-3 rounded-xl text-cyan-400 group-hover:bg-cyan-500/20 transition-colors">
                            <i data-lucide="music" class="w-8 h-8"></i>
                        </div>
                        <span class="text-xs font-mono text-gray-400 border border-white/10 bg-white/5 px-2 py-1 rounded">MP3 320kbps</span>
                    </div>
                    <h3 class="text-2xl font-bold mb-3 text-white group-hover:text-cyan-300 transition-colors">Descarga de Música</h3>
                    <p class="text-gray-400 mb-6">Archivos de audio en alta calidad con carátulas y metadatos organizados.</p>
                    <button onclick="toggleAccordion('content-music', 'chevron-music')" class="w-full flex items-center justify-between px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 transition-colors border border-white/5 group-hover:border-cyan-500/30">
                        <span class="text-sm font-semibold text-cyan-200">Ver Precios y Detalles</span>
                        <i id="chevron-music" data-lucide="chevron-down" class="w-4 h-4 text-cyan-200 chevron"></i>
                    </button>
                    <div id="content-music" class="accordion-content">
                        <div class="space-y-3 text-sm text-gray-300">
                            <p class="italic opacity-80 border-l-2 border-cyan-500 pl-3">Incluye: Artista, Álbum, Año y Carátula original.</p>
                            <div class="space-y-2 mt-4">
                                <div class="flex justify-between items-center p-3 rounded-lg bg-black/20 border border-white/5">
                                    <span>Por canción</span>
                                    <span class="font-bold text-green-400">$ 15 MXN</span>
                                </div>
                                <div class="flex justify-between items-center p-3 rounded-lg bg-black/20 border border-white/5">
                                    <span>Canción FLAC (Lossless)</span>
                                    <span class="font-bold text-green-400">$ 30 MXN</span>
                                </div>
                                <div class="flex justify-between items-center p-3 rounded-lg bg-black/20 border border-white/5">
                                    <span>Álbum completo</span>
                                    <span class="font-bold text-green-400">$ 30 MXN</span>
                                </div>
                                <div class="flex justify-between items-center p-3 rounded-lg bg-black/20 border border-white/5">
                                    <span>Playlist (50 canciones)</span>
                                    <span class="font-bold text-green-400">$ 50 MXN</span>
                                </div>
                            </div>
                            <div class="mt-4 pt-4 border-t border-white/10">
                                <button onclick="toggleAccordion('detail-music', 'chevron-music-detail')" class="w-full text-left text-xs text-cyan-400 hover:text-cyan-300 flex items-center gap-2">
                                    <i id="chevron-music-detail" data-lucide="plus-circle" class="w-4 h-4 chevron"></i>
                                    <i data-lucide="clipboard-list" class="w-4 h-4"></i> Ver Requisitos y Tiempo de Entrega
                                </button>
                                <div id="detail-music" class="accordion-content">
                                    <div class="bg-black/40 p-4 rounded-lg mt-2 text-xs text-gray-300">
                                        <h4 class="font-bold text-white mb-2">Requisitos:</h4>
                                        <ul class="details-list">
                                            <li>Lista de canciones (Nombre exacto o link de YouTube).</li>
                                            <li>Nombre del álbum (si aplica).</li>
                                        </ul>
                                        <h4 class="font-bold text-white mt-3 mb-2">Tiempo de Entrega:</h4>
                                        <ul class="details-list">
                                            <li>1 a 2 días hábiles (dependiendo cantidad).</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Otros servicios (Invitaciones, CURP, etc.) se mantienen igual... -->
                <!-- ... (Bloque de código recortado para brevedad, pero es el mismo contenido) ... -->
                <!-- Repetir la estructura para los demás servicios -->
                <div class="glass-card p-8 rounded-3xl border-l-4 border-fuchsia-500 group">
                    <div class="flex justify-between items-start mb-6">
                        <div class="bg-fuchsia-500/10 border border-fuchsia-500/20 p-3 rounded-xl text-fuchsia-400 group-hover:bg-fuchsia-500/20 transition-colors">
                            <i data-lucide="mail" class="w-8 h-8"></i>
                        </div>
                        <span class="text-xs font-mono text-gray-400 border border-white/10 bg-white/5 px-2 py-1 rounded">Web / Video / IMG</span>
                    </div>
                    <h3 class="text-2xl font-bold mb-3 text-white group-hover:text-fuchsia-300 transition-colors">Invitaciones Digitales</h3>
                    <p class="text-gray-400 mb-6">Diseños únicos para tus eventos. Desde imágenes sencillas hasta experiencias web interactivas.</p>
                    <button onclick="toggleAccordion('content-invit', 'chevron-invit')" class="w-full flex items-center justify-between px-4 py-3 rounded-xl bg-white/10 hover:bg-white/10 transition-colors border border-white/5 group-hover:border-fuchsia-500/30">
                        <span class="text-sm font-semibold text-fuchsia-200">Ver Precios y Detalles</span>
                        <i id="chevron-invit" data-lucide="chevron-down" class="w-4 h-4 text-fuchsia-200 chevron"></i>
                    </button>
                    <div id="content-invit" class="accordion-content">
                        <!-- ... contenido invitaciones ... -->
                        <div class="space-y-3 text-sm text-gray-300">
                            <p class="italic opacity-80 border-l-2 border-fuchsia-500 pl-3">Ideal para Bodas, XV años, Cumpleaños y Bautizos.</p>
                            <div class="space-y-2 mt-4">
                                <div class="flex justify-between items-center p-3 rounded-lg bg-black/20 border border-white/5">
                                    <span>Invitación Estática (IMG)</span>
                                    <span class="font-bold text-green-400">$ 70 MXN</span>
                                </div>
                                <div class="flex justify-between items-center p-3 rounded-lg bg-black/20 border border-white/5">
                                    <span>Invitación en Video (MP4)</span>
                                    <span class="font-bold text-green-400">$ 150 MXN</span>
                                </div>
                                <div class="flex justify-between items-center p-3 rounded-lg bg-black/20 border border-white/5">
                                    <span>Web Interactiva (PDF+Web)</span>
                                    <span class="font-bold text-green-400">$ 200 MXN</span>
                                </div>
                            </div>
                            <div class="mt-4 pt-4 border-t border-white/10">
                                <button onclick="toggleAccordion('detail-invit', 'chevron-invit-detail')" class="w-full text-left text-xs text-fuchsia-400 hover:text-fuchsia-300 flex items-center gap-2">
                                    <i id="chevron-invit-detail" data-lucide="plus-circle" class="w-4 h-4 chevron"></i>
                                    <i data-lucide="clipboard-list" class="w-4 h-4"></i> Ver Requisitos y Tiempo de Entrega
                                </button>
                                <div id="detail-invit" class="accordion-content">
                                    <div class="bg-black/40 p-4 rounded-lg mt-2 text-xs text-gray-300">
                                        <h4 class="font-bold text-white mb-2">Requisitos:</h4>
                                        <ul class="details-list">
                                            <li>Datos del evento.</li>
                                            <li>Nombre del festejado(a).</li>
                                            <li>Ubicación exacta.</li>
                                            <li>Fotos.</li>
                                            <li>Canción de fondo.</li>
                                        </ul>
                                        <h4 class="font-bold text-white mt-3 mb-2">Tiempo de Entrega:</h4>
                                        <ul class="details-list">
                                            <li>Variado según tipo.</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- Fin grid -->
        </div>
    </section>

    <!-- NUEVO: BARRA FLOTANTE DE CONTACTO (Sustituye la sección fija) -->
    <div id="floating-contact" class="fixed bottom-6 left-1/2 transform -translate-x-1/2 z-40 transition-transform duration-500 w-[90%] max-w-md">
        <div class="glass-panel rounded-2xl p-4 border border-white/20 shadow-[0_10px_40px_-10px_rgba(0,0,0,0.5)] backdrop-blur-xl bg-[#0f172a]/90">
            <div class="text-center mb-3">
                <h3 class="text-white font-bold text-lg leading-tight">Contacto</h3>
                <p class="text-xs text-gray-400 mt-1">¿Listo para mejorar tu vida digital? Estamos aquí para ayudarte.</p>
            </div>
            <div class="flex items-center justify-between gap-3">
                <a href="https://wa.me/message/GTDQYEMHLALMH1?src=qr" target="_blank" class="flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-green-600/90 hover:bg-green-600/100 text-white font-bold text-sm transition-all shadow-lg group">
                    <i class="fa-brands fa-whatsapp text-lg group-hover:scale-110 transition-transform"></i>
                    WhatsApp
                </a>
                <a href="mailto:jesusantoniobarretocastillo02@gmail.com" class="flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-white/10 hover:bg-white/20 border border-white/10 text-white font-bold text-sm transition-all group">
                    <i data-lucide="mail" class="w-4 h-4 group-hover:scale-110 transition-transform"></i>
                    Correo
                </a>
            </div>
        </div>
    </div>

    <footer class="glass-panel py-8 mt-12 text-center border-b-0 border-x-0 relative z-10 bg-[#0f172a]">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="flex items-center gap-2 opacity-70 hover:opacity-100 transition-opacity">
                    <i data-lucide="cpu" class="text-cyan-400 w-5 h-5"></i>
                    <span class="font-bold text-white">BitStudio</span>
                </div>
                <p class="text-gray-500 text-xs">© 2025 BitStudio. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        // Inicializar iconos Lucide
        lucide.createIcons();

        // Lógica para cerrar el menú móvil automáticamente
        document.querySelectorAll('#mobile-menu a').forEach(link => {
            link.addEventListener('click', () => {
                document.getElementById('mobile-menu').classList.add('hidden');
            });
        });

        // Lógica del Acordeón para los precios y detalles
        function toggleAccordion(contentId, iconId) {
            const content = document.getElementById(contentId);
            const icon = document.getElementById(iconId);
            
            if (content.classList.contains('active')) {
                content.classList.remove('active');
                icon.style.transform = 'rotate(0deg)';
            } else {
                content.classList.add('active');
                icon.style.transform = 'rotate(180deg)';
            }
        }

        // --- Lógica Nueva para la Sección de Pagos ---
        function togglePagos() {
            const overlay = document.getElementById('pagos-overlay');
            if (overlay.classList.contains('hidden-overlay')) {
                overlay.classList.remove('hidden-overlay');
                overlay.classList.add('visible-overlay');
            } else {
                overlay.classList.remove('visible-overlay');
                overlay.classList.add('hidden-overlay');
            }
        }

        function toggleEmailPagos() {
            const content = document.getElementById('email-pagos-content');
            const icon = document.getElementById('chevron-email');
            
            if (content.classList.contains('active')) {
                content.classList.remove('active');
                icon.style.transform = 'rotate(0deg)';
            } else {
                content.classList.add('active');
                icon.style.transform = 'rotate(180deg)';
            }
        }

        function copyingCorreo() {
            const correo = document.getElementById('paypal-email').innerText;
            navigator.clipboard.writeText(correo).then(() => {
                alert('Correo copiado al portapapeles');
            });
        }

        // --- Lógica Scroll para Barra Flotante ---
        let lastScrollTop = 0;
        let upScrollDistance = 0; // Para medir cuánto ha subido
        const floatingContact = document.getElementById('floating-contact');
        const mainNav = document.getElementById('main-nav');
        const miniHeader = document.getElementById('mini-header');
        const musicContainer = document.getElementById('music-container');
        
        // Configuración de umbral para reaparecer el header
        const UP_SCROLL_THRESHOLD = 150; 

        window.addEventListener("scroll", function() {
            let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            // Si estamos muy arriba (inicio), mostrar siempre el nav y ocultar el mini header
            if (scrollTop < 50) {
                floatingContact.classList.remove('translate-y-[200%]');
                mainNav.classList.remove('-translate-y-full');
                miniHeader.classList.add('-translate-y-32', 'opacity-0');
                musicContainer.classList.replace('top-4', 'top-24'); // Restaurar música
                upScrollDistance = 0; // Resetear contador al llegar arriba
                return;
            }

            if (scrollTop > lastScrollTop) {
                // Scroll hacia ABAJO
                // 1. Ocultar Contacto
                floatingContact.classList.add('translate-y-[200%]');
                
                // 2. Ocultar Nav Principal
                mainNav.classList.add('-translate-y-full');
                
                // 3. Mostrar Mini Header (Logo Flotante)
                miniHeader.classList.remove('-translate-y-32', 'opacity-0');

                // 4. Mover botón de música hacia arriba (ocupar lugar del header)
                musicContainer.classList.replace('top-24', 'top-4');
                
                // Resetear contador de subida porque estamos bajando
                upScrollDistance = 0;

                // Cerrar menú móvil si está abierto al bajar
                document.getElementById('mobile-menu').classList.add('hidden');

            } else {
                // Scroll hacia ARRIBA
                
                // 1. Mostrar Contacto
                floatingContact.classList.remove('translate-y-[200%]');
                
                // 2. Lógica para el Header Principal ("Considerable cantidad")
                // Calculamos cuánto hemos subido desde que empezamos a subir
                let delta = lastScrollTop - scrollTop;
                upScrollDistance += delta;

                if (upScrollDistance > UP_SCROLL_THRESHOLD) {
                    // Si hemos subido más del umbral, mostrar Nav y ocultar Mini
                    mainNav.classList.remove('-translate-y-full');
                    miniHeader.classList.add('-translate-y-32', 'opacity-0');
                    
                    // Restaurar botón de música a su posición original
                    musicContainer.classList.replace('top-4', 'top-24');
                }
            }
            
            // Actualizar posición previa
            lastScrollTop = scrollTop <= 0 ? 0 : scrollTop; 
        }, false);

        // --- Lógica para el Modal de Demo (ACTUALIZADA CON MENÚ) ---
        
        // 1. Abrir el modal mostrando el MENÚ
        function openDemo() { 
            const overlay = document.getElementById('demo-overlay');
            const menu = document.getElementById('demo-menu');
            const container = document.getElementById('demo-container');
            const backBtn = document.getElementById('back-to-menu');

            // Resetear estado
            menu.classList.remove('hidden');
            container.classList.add('hidden');
            backBtn.classList.add('hidden');
            
            overlay.classList.remove('hidden-demo');
            overlay.classList.add('visible-demo');
        }

        // 2. Cargar una demo específica desde el menú
        function loadDemo(url) {
            const menu = document.getElementById('demo-menu');
            const container = document.getElementById('demo-container');
            const iframe = document.getElementById('demo-frame');
            const backBtn = document.getElementById('back-to-menu');

            menu.classList.add('hidden'); // Ocultar menú
            container.classList.remove('hidden'); // Mostrar iframe
            backBtn.classList.remove('hidden'); // Mostrar botón volver

            iframe.src = url; // Cargar página
        }

        // 3. Volver del iframe al menú
        function backToMenu() {
            const menu = document.getElementById('demo-menu');
            const container = document.getElementById('demo-container');
            const iframe = document.getElementById('demo-frame');
            const backBtn = document.getElementById('back-to-menu');

            iframe.src = ''; // Detener carga/audio
            
            container.classList.add('hidden');
            backBtn.classList.add('hidden');
            menu.classList.remove('hidden');
        }

        // 4. Cerrar todo el modal
        function closeDemo() {
            const iframe = document.getElementById('demo-frame');
            const overlay = document.getElementById('demo-overlay');
            
            overlay.classList.remove('visible-demo');
            overlay.classList.add('hidden-demo');
            
            setTimeout(() => {
                iframe.src = ''; // Limpiar src
            }, 300);
        }

        // --- Lógica de Música de Fondo y Controles ---
        document.addEventListener('DOMContentLoaded', function() {
            const audio = document.getElementById('bg-music');
            
            // --- NUEVAS REFERENCIAS PARA EL MENÚ DESPLEGABLE ---
            const musicTrigger = document.getElementById('music-trigger');
            const musicPanel = document.getElementById('music-panel');
            const triggerIcon = musicTrigger.querySelector('i');

            // Toggle para mostrar/ocultar el panel de música
            musicTrigger.addEventListener('click', () => {
                if (musicPanel.classList.contains('hidden')) {
                    // MOSTRAR:
                    musicPanel.classList.remove('hidden');
                    musicPanel.classList.add('flex'); 
                    setTimeout(() => {
                        musicPanel.classList.remove('-translate-y-8', 'opacity-0');
                    }, 10);
                    triggerIcon.classList.add('rotate-180');
                } else {
                    // OCULTAR:
                    musicPanel.classList.add('-translate-y-8', 'opacity-0');
                    triggerIcon.classList.remove('rotate-180');
                    setTimeout(() => {
                        musicPanel.classList.add('hidden');
                        musicPanel.classList.remove('flex');
                    }, 500); 
                }
            });


            const musicToggleBtn = document.getElementById('music-toggle');
            const muteToggleBtn = document.getElementById('mute-toggle');
            
            const volumeExpandBtn = document.getElementById('volume-expand');
            const volumeWrapper = document.getElementById('volume-wrapper');
            const volumeSlider = document.getElementById('volume-slider');
            const volumeText = document.getElementById('volume-text');
            const expandIcon = volumeExpandBtn.querySelector('i');

            const playIcon = musicToggleBtn.querySelector('i');
            const muteIcon = muteToggleBtn.querySelector('i');

            if (audio) {
                audio.volume = 0.4; // Volumen inicial
                volumeSlider.value = 0.4; // Sincronizar slider
                
                // Función para actualizar icono de Play/Pause
                function updatePlayIcon() {
                    if (audio.paused) {
                        playIcon.classList.remove('fa-pause');
                        playIcon.classList.add('fa-play');
                        playIcon.parentElement.classList.add('text-cyan-400');
                        playIcon.parentElement.classList.remove('text-green-400');
                    } else {
                        playIcon.classList.remove('fa-play');
                        playIcon.classList.add('fa-pause');
                        playIcon.parentElement.classList.remove('text-cyan-400');
                        playIcon.parentElement.classList.add('text-green-400');
                    }
                }

                // Función para actualizar icono de Mute y Volumen Dinámicamente (CORREGIDA)
                function updateMuteIcon() {
                    const vol = audio.volume;
                    const muteBtn = document.getElementById('mute-toggle');
                    
                    // Elementos SVG
                    const volX = document.getElementById('vol-mute-x');
                    const wave1 = document.getElementById('vol-wave-1');
                    const wave2 = document.getElementById('vol-wave-2');
                    const wave3 = document.getElementById('vol-wave-3');

                    // Añadir animación pop
                    muteBtn.classList.remove('icon-pop');
                    void muteBtn.offsetWidth; 
                    muteBtn.classList.add('icon-pop');

                    const isMuted = audio.muted || vol === 0;

                    // Mute State (X)
                    if (isMuted) {
                        volX.classList.remove('opacity-0');
                        wave1.classList.add('opacity-0');
                        wave2.classList.add('opacity-0');
                        wave3.classList.add('opacity-0');
                        muteBtn.classList.add('text-red-400');
                    } else {
                        volX.classList.add('opacity-0');
                        muteBtn.classList.remove('text-red-400');

                        // Wave 1 (> 0%)
                        if (vol > 0) wave1.classList.remove('opacity-0');
                        else wave1.classList.add('opacity-0');

                        // Wave 2 (> 25%)
                        if (vol > 0.25) wave2.classList.remove('opacity-0');
                        else wave2.classList.add('opacity-0');

                        // Wave 3 (> 75%) - Custom threshold for full volume feel
                        if (vol > 0.75) wave3.classList.remove('opacity-0');
                        else wave3.classList.add('opacity-0');
                    }
                }

                // Initialize Icon State
                updateMuteIcon();

                // Toggle Play/Pause
                musicToggleBtn.addEventListener('click', () => {
                    if (audio.paused) {
                        const promise = audio.play();
                        if (promise !== undefined) {
                            promise.catch(error => {
                                console.log("Reproducción fallida o interrumpida", error);
                            });
                        }
                    } else {
                        audio.pause();
                    }
                });

                // Toggle Mute
                muteToggleBtn.addEventListener('click', () => {
                    audio.muted = !audio.muted;
                    updateMuteIcon();
                    // Si desmuta y el volumen estaba en 0, ponerlo bajito visualmente
                    if (!audio.muted && audio.volume === 0) {
                        audio.volume = 0.1;
                        volumeSlider.value = 0.1;
                        volumeText.innerText = "10%";
                    }
                });

                // Nueva Lógica: Expandir/Contraer Barra de Volumen
                volumeExpandBtn.addEventListener('click', () => {
                    if (volumeWrapper.classList.contains('w-0')) {
                        // Expandir
                        volumeWrapper.classList.remove('w-0');
                        volumeWrapper.classList.add('w-auto'); 
                        expandIcon.classList.remove('fa-chevron-right');
                        expandIcon.classList.add('fa-chevron-left');
                    } else {
                        // Contraer
                        volumeWrapper.classList.remove('w-auto');
                        volumeWrapper.classList.add('w-0');
                        expandIcon.classList.remove('fa-chevron-left');
                        expandIcon.classList.add('fa-chevron-right');
                    }
                });

                // Nueva Lógica: Control del Slider
                volumeSlider.addEventListener('input', (e) => {
                    const value = parseFloat(e.target.value);
                    audio.volume = value;
                    
                    // Actualizar Texto Porcentaje
                    volumeText.innerText = Math.round(value * 100) + "%";

                    // Si el usuario mueve el slider, quitamos el mute si estaba activo
                    if (value > 0 && audio.muted) {
                        audio.muted = false;
                    }
                    updateMuteIcon();
                });

                // Listeners de eventos del audio (para sincronizar si el navegador lo pausa/reproduce solo)
                audio.addEventListener('play', updatePlayIcon);
                audio.addEventListener('pause', updatePlayIcon);

                // Intentar reproducir automáticamente
                const playPromise = audio.play();

                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        updatePlayIcon();
                    }).catch(error => {
                        console.log("Autoplay bloqueado. Esperando interacción.");
                        updatePlayIcon();
                        
                        // Fallback: Activar audio en la primera interacción
                        const enableAudio = () => {
                            if (audio.paused) {
                                const p = audio.play();
                                if(p) p.catch(e => console.log("Error de reproducción por interacción", e));
                            }
                            document.removeEventListener('click', enableAudio);
                        };
                        document.addEventListener('click', enableAudio);
                    });
                }
            }
        });

    </script>
</body>
</html>
